<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>candlestick</title>
    <link rel="shortcut icon" href="#" />
    <script src="../dist/chart-ease.js" defer></script>
  </head>
  <body>
    <chart-ease id="textType" width="200" height="200">
      <data-set>
        <path
          is="path-type"
          stroke-linecap="round"
          stroke="aqua"
          stroke-width="2.5"
          fill="none"
        ></path>
        <text x="0" y="15" fill="black" font-size="10px"></text>
      </data-set>
    </chart-ease>

    <chart-ease id="rectType" width="200" height="200">
      <data-set>
        <path
          is="path-type"
          stroke-linecap="round"
          stroke="aqua"
          stroke-width="2.5"
          fill="none"
        ></path>
        <rect width="10" height="5" fill="#44ff44" />
      </data-set>
    </chart-ease>

    <chart-ease id="pathType" width="200" height="200">
      <data-set>
        <path
          is="path-type"
          stroke-linecap="round"
          stroke="aqua"
          stroke-width="2.5"
          fill="none"
        ></path>
        <path fill="none" stroke="blue" stroke-width="2" />
      </data-set>
    </chart-ease>

    <chart-ease id="polylineType" width="200" height="200">
      <data-set>
        <path
          is="path-type"
          stroke-linecap="round"
          stroke="aqua"
          stroke-width="2.5"
          fill="none"
        ></path>
        <polyline stroke="orange" fill="transparent" stroke-width="1" />
      </data-set>
    </chart-ease>

    <chart-ease id="lineType" width="200" height="200">
      <data-set>
        <path
          is="path-type"
          stroke-linecap="round"
          stroke="aqua"
          stroke-width="2.5"
          fill="none"
        ></path>
        <line stroke="orange" stroke-width="2" />
      </data-set>
    </chart-ease>
    <script>
      window.onload = function () {
        //### text type ###
        const textType = document.querySelector("#textType");
        textType.ondraw = ({ shape, row, index, originalRow }) => {
          shape.setAttribute(
            "x",
            row.x - originalRow.y.toString().length * 2.5
          );
          shape.setAttribute("y", row.y);
          shape.innerHTML = originalRow.y;
          if (index === 0) shape.setAttribute("opacity", 0.1);
          if (index === 1) shape.setAttribute("opacity", 0.5);
        };
        textType.data = [
          { x: 1, y: 0.6152156 },
          { x: 2, y: 0.6152154 },
          { x: 3, y: 0.615215 },
          { x: 4, y: 0.6152153 },
          { x: 5, y: 0.6152155 },
          { x: 6, y: 0.6152152 },
          { x: 7, y: 0.6152157 },
          { x: 8, y: 0.6152153 },
        ];

        //##################
        //##################

        const data = [
          { x: 1, y: 6 },
          { x: 2, y: 4 },
          { x: 3, y: 0 },
          { x: 4, y: 3 },
          { x: 5, y: 5 },
          { x: 6, y: 2 },
          { x: 7, y: 7 },
          { x: 8, y: 3 },
        ];

        //### rect type ###
        const rectType = document.querySelector("#rectType");
        rectType.ondraw = ({ shape, row, index }) => {
          shape.setAttribute(
            "x",
            row.x - Number(shape.getAttribute("width")) / 2
          );
          shape.setAttribute(
            "y",
            row.y - Number(shape.getAttribute("width")) / 2
          );
          if (index === 0) {
            shape.setAttribute("opacity", 0.1);
            shape.setAttribute("fill", "#995544");
          }
          if (index === 0) {
            shape.setAttribute("opacity", 0.1);
            shape.setAttribute("fill", "#22aa44");
          }
        };
        rectType.data = data;

        //### path type ###
        const pathType = document.querySelector("#pathType");
        pathType.ondraw = ({ shape, row, index }) => {
          const { x, y } = row;
          shape.setAttribute(
            "d",
            `M${x - 4},${y - 4} V${y + 4} H${x + 4} V${y - 4} H${x - 4}`
          );
          if (index === 0) shape.setAttribute("opacity", 0.1);
        };
        pathType.data = data;

        //### polyline type ###
        const polylineType = document.querySelector("#polylineType");
        polylineType.ondraw = ({ shape, row }) => {
          const { x, y } = row;
          shape.setAttribute(
            "points",
            `${x + 5} ${y + 5} ${x - 5} ${y + 5} ${x} 
            ${y - 5} ${x + 5} ${y + 5}`
          );
        };
        polylineType.data = data;

        //### Line type ###
        const lineType = document.querySelector("#lineType");
        lineType.ondraw = ({ shape, row }) => {
          shape.setAttribute("x1", row.x - 5);
          shape.setAttribute("x2", row.x + 5);
          shape.setAttribute("y1", row.y);
          shape.setAttribute("y2", row.y);
        };
        lineType.data = data;
      };
    </script>
  </body>
</html>
