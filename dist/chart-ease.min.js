!function(){function t(e){const i=document.createElementNS('http://www.w3.org/2000/svg',e.tagName.toLowerCase());var r,s;return r=e,s=i,Array.from(r.attributes).forEach((t=>{t.value&&s.setAttribute(t.name,t.value)})),((t,e)=>{t.style.cssText&&(e.style.cssText=t.style.cssText)})(e,i),Array.from(e.children).forEach((e=>{i.appendChild(t(e))})),i}function e(t){return document.createElementNS('http://www.w3.org/2000/svg',t)}const i=t=>`L ${t.x} ${t.y}`,r=(t,e,i)=>{const r=e.reduce(((t,e,r,s)=>0===r?`M ${e.x},${e.y}`:`${t} ${i(e,r,s)}`),'');t.setAttribute('d',r)},s=(t,e,i,r)=>{const s=((t,e)=>{const i=e.x-t.x,r=e.y-t.y;return{length:Math.sqrt(Math.pow(i,2)+Math.pow(r,2)),angle:Math.atan2(r,i)}})(e||t,i||t),n=s.angle+(r?Math.PI:0),a=.05*s.length;return[t.x+Math.cos(n)*a,t.y+Math.sin(n)*a]},n=(t,e,i)=>{const[r,n]=s(i[e-1],i[e-2],t),[a,o]=s(t,i[e-1],i[e+1],!0);return`C ${r},${n} ${a},${o} ${t.x},${t.y}`};function a(t,e){const{height:i}=t.getBoundingClientRect();'text'==e.tagName.toLowerCase()&&(e.setAttribute('transform',`scale(1,-1) translate(0, -${i})`),e.setAttribute('y',i-parseFloat(e.getAttribute('y'))))}function o(s){let o=s.children;1==o.length&&'svg'===o[0].nodeName&&(o=o[0].children),Array.prototype.slice.call(o).forEach((o=>{o.hasAttribute('data-drawn-as')&&'edge'===o.getAttribute('data-drawn-as')?((e,s)=>{if(!e)return;const a=t(e);var o,h;'path'===a.nodeName?a.hasAttribute('data-style')&&'smooth'===a.getAttribute('data-style')?r(a,s.normalizedData,n):r(a,s.normalizedData,i):'polyline'===a.nodeName&&(o=a,h=s.normalizedData,o.setAttribute('points',h.map((t=>`${t.x},${t.y}`)).join(' '))),s.g.appendChild(a)})(o,s):((i,r)=>{const s=e('g');i.normalizedData.forEach(((e,n)=>{const o=i.ondraw,h=t(r);o?o({shape:h,row:e,originalRow:i.originalData[n],index:n}):((t,e,i)=>{switch(t.nodeName){case'rect':if(e>0){const i=Number(t.getAttribute('width')),r=i>0?e-i/2:e;t.setAttribute('x',r)}if(i>0){const r=Number(t.getAttribute('height')),s=r>0?i-r/2:e;t.setAttribute('y',s)}break;case'circle':case'ellipse':e>0&&t.setAttribute('cx',e),i>0&&t.setAttribute('cy',i);default:e>0&&t.setAttribute('x',e),i>0&&t.setAttribute('y',i)}})(h,e.x,e.y),s.appendChild(h),a(s,h)})),i.g.appendChild(s)})(s,o)}))}function h(t,e){e.forEach((e=>{null==e.min&&(e.min=((t,e)=>{let i=Number.MAX_VALUE;for(let r=1;r<t.length;r++)for(let r=0;r<e.length;r++){const s=l(t,e[r]);i>s&&(i=s)}return i})(t,e.cols)),null==e.max&&(e.max=((t,e)=>{let i=Number.MIN_VALUE;for(let r=1;r<t.length;r++)for(let r=0;r<e.length;r++){const s=c(t,e[r]);s>i&&(i=s)}return i})(t,e.cols))}))}function l(t,e){let i=t[0][e];for(let r=1;r<t.length;r++)i=Math.min(i,t[r][e]);return i}function c(t,e){let i=t[0][e];for(let r=1;r<t.length;r++)i=Math.max(i,t[r][e]);return i}class g extends HTMLElement{constructor(){super()}connectedCallback(){}disconnectedCallback(){}set data(t){this.hAxis=this.getDirection('h'),this.vAxis=this.getDirection('v'),this.originalData=t,this.initData();const e=[this.hAxis,this.vAxis];h(this.originalData,e),this.normalizedData=((t,e)=>{const i=t.map((t=>({...t}))),r=Object.keys(t[0]);return i.forEach((t=>{e.forEach((e=>{r.forEach((i=>{e.cols.includes(i)&&(t[i]=Math.round(((t,e)=>(t-e.min)/(e.max-e.min)*(e.stop-e.start)+e.start)(t[i],e)))}))}))})),i})(this.originalData,e),this.render()}initData(){'object'!=typeof this.originalData[0]&&(this.originalData=this.originalData.map(((t,e)=>({x:e+1,y:t})))),this.hAxis.cols.concat(this.vAxis.cols).forEach((t=>{void 0===this.originalData[0][t]&&(this.originalData=this.originalData.map(((e,i)=>(e[t]=i+1,e))))}))}render(){this.init(),this.g.innerHTML='',o(this)}init(){const t=this.parentElement.querySelector('g[name="dataset"]');this.g||(this.g=e('g'),t.append(this.g))}getDirection(t){let e={cols:this.getCols(t),start:this.getStart(t),stop:this.getStop(t)},i=this.getAxis(t);return i&&(e={...e,min:i.min,max:i.max}),e}getAxis(t){return'h'===t?this.parentElement.querySelector('bottom-axis')??this.parentElement.querySelector('top-axis'):this.parentElement.querySelector('left-axis')??this.parentElement.querySelector('right-axis')}getStart(t){return'h'===t?this.parentElement.margin.left:this.parentElement.margin.bottom}getStop(t){return'h'===t?this.parentElement.width-this.parentElement.margin.right:this.parentElement.height-this.parentElement.margin.top}getCols(t){return'h'===t?this.getAttribute('hAxis')?this.getAttribute('hAxis').split(','):['x']:this.getAttribute('vAxis')?this.getAttribute('vAxis').split(','):['y']}}function u(t){t.svg=((t,e)=>{const i=document.createElementNS('http://www.w3.org/2000/svg','svg');return i.setAttribute('width',t),i.setAttribute('height',e),i.setAttribute('transform','scale(1,-1)'),i})(t.width,t.height),t.appendChild(t.svg),d(t.svg,'grid'),d(t.svg,'dataset'),d(t.svg,'axes'),t.dispatchEvent(new Event('created'))}function d(t,i){const r=e('g');r.setAttribute('name',i),t.appendChild(r)}class m extends HTMLElement{constructor(){super(),this.parentElement.addEventListener('created',(t=>{this.render()}))}connectedCallback(){}disconnectedCallback(){}render(){const i=this.parentElement.querySelector('g[name="axes"]'),r=this.parentElement.querySelector('g[name="grid"]');this.setTickPositions(),((i,r)=>{const s=e('g');if(!i.line)return;const n=t(i.line);i.isVertical?(n.setAttribute('x1',i.position),n.setAttribute('x2',i.position),n.setAttribute('y1',i.start),n.setAttribute('y2',i.stop)):(n.setAttribute('x1',i.start),n.setAttribute('x2',i.stop),n.setAttribute('y1',i.position),n.setAttribute('y2',i.position)),s.appendChild(n),r.appendChild(s)})(this,i),this.ticks.length>0&&(((i,r)=>{const s=e('g');i.ticks.forEach((e=>{if(!i.tick)return;const r=t(i.tick),n=Number(r.getAttribute('height')||0),a=Number(r.getAttribute('width')||0),o=i.line?.getAttribute('stroke-width')||0;i.isVertical?(r.setAttribute('x',i.position-o),r.setAttribute('y',e.position-n/2)):(r.setAttribute('x',e.position-a/2),r.setAttribute('y',i.position-o)),s.appendChild(r)})),r.appendChild(s)})(this,i),((i,r)=>{const s=e('g');r.appendChild(s),i.ticks.forEach((e=>{if(!i.label)return;const n=t(i.label);n.innerHTML=e.value,s.appendChild(n);let{width:o,height:h}=n.getBoundingClientRect();const l=i.tick?.getAttribute('width')||0,c=i.tick?.getAttribute('height')||0;switch(i.direction){case'left':o+=o/e.value.toString().length,n.setAttribute('x',i.position-o-l/2),n.setAttribute('y',e.position-h/3);break;case'right':n.setAttribute('x',i.position+l/2+5),n.setAttribute('y',e.position-h/3);break;case'bottom':n.setAttribute('x',e.position-o/2),n.setAttribute('y',i.position-h-c/2);break;case'top':n.setAttribute('x',e.position-o/2),n.setAttribute('y',i.position+c+5);break;default:return}a(r,n)}))})(this,i),((i,r)=>{const s=e('g');i.grid&&i.ticks.forEach((e=>{if(!i.grid)return;const r=t(i.grid);i.isVertical?(r.setAttribute('x1',i.gridStart),r.setAttribute('x2',i.gridStop),r.setAttribute('y1',e.position),r.setAttribute('y2',e.position)):(r.setAttribute('x1',e.position),r.setAttribute('x2',e.position),r.setAttribute('y1',i.gridStart),r.setAttribute('y2',i.gridStop)),s.appendChild(r)})),r.appendChild(s)})(this,r))}setTickPositions(){this.ticks=[];const t=parseInt(this.getAttribute('ticks')??0);if(t<=0)return;const e=Math.round((this.max-this.min)/(t-1));let i=this.min,r=this.start;for(;r=(i-this.min)/(this.max-this.min)*(this.stop-this.start)+this.start,!(r>this.stop||isNaN(r));)this.ticks.push({value:i,position:r}),i+=e}get min(){return parseInt(this.getAttribute('min')??0)}get max(){return parseInt(this.getAttribute('max')??0)}get label(){return this.querySelector('text')}get grid(){return this.querySelector('line[grid-line]')}get line(){return this.querySelector('line[axis-line]')}get tick(){return this.querySelector('rect[axis-tick]')}get margin(){return this.parentElement.margin}get height(){return this.parentElement.height}get width(){return this.parentElement.width}}class p extends HTMLElement{constructor(){super()}connectedCallback(){this.setStyles(),u(this)}disconnectedCallback(){}get height(){return parseFloat(this.getAttribute('height')??200)}get width(){return parseFloat(this.getAttribute('width')??200)}get margin(){const t=t=>parseFloat(this.querySelector(t)?.getAttribute('width'))||0,e=t=>parseFloat(this.querySelector(t)?.getAttribute('height'))||0,i=t=>parseFloat(this.getAttribute(t)??this.getAttribute('margin')??10);return{top:e('top-axis')+i('margin-top'),bottom:e('bottom-axis')+i('margin-bottom'),left:t('left-axis')+i('margin-left'),right:t('right-axis')+i('margin-right')}}setStyles(){this.style.lineHeight=0}}customElements.get('left-axis')??customElements.define('left-axis',class extends m{constructor(){super()}get start(){return this.margin.bottom}get stop(){return this.height-this.margin.top}get position(){return this.margin.left}get gridStart(){return this.margin.left}get gridStop(){return this.width-this.margin.right}get isVertical(){return!0}get direction(){return'left'}connectedCallback(){}disconnectedCallback(){}}),customElements.get('right-axis')??customElements.define('right-axis',class extends m{constructor(){super()}get start(){return this.margin.bottom}get stop(){return this.height-this.margin.top}get position(){return this.width-this.margin.right}get gridStart(){return this.margin.left}get gridStop(){return this.width-this.margin.right}get isVertical(){return!0}get direction(){return'right'}connectedCallback(){}disconnectedCallback(){}}),customElements.get('top-axis')??customElements.define('top-axis',class extends m{constructor(){super()}get start(){return this.margin.left}get stop(){return this.width-this.margin.right}get position(){return this.height-this.margin.top}get gridStart(){return this.margin.bottom}get gridStop(){return this.height-this.margin.top}get isVertical(){return!1}get direction(){return'top'}connectedCallback(){}disconnectedCallback(){}}),customElements.get('bottom-axis')??customElements.define('bottom-axis',class extends m{constructor(){super()}get start(){return this.margin.left}get stop(){return this.width-this.margin.right}get position(){return this.margin.bottom}get gridStart(){return this.margin.bottom}get gridStop(){return this.height-this.margin.top}get isVertical(){return!1}get direction(){return'bottom'}connectedCallback(){}disconnectedCallback(){}}),customElements.get('data-set')??customElements.define('data-set',g),customElements.get('chart-ease')??customElements.define('chart-ease',p),customElements.get('candle-stick')??customElements.define('candle-stick',class extends g{constructor(){super(),this.adjust()}connectedCallback(){}disconnectedCallback(){}adjust(){this.appendChild(e('line')),this.appendChild(e('rect')),this.ondraw=({shape:t,row:e})=>{switch(t.tagName){case'line':t.setAttribute('x1',e.x+5),t.setAttribute('x2',e.x+5),t.setAttribute('y1',e.low),t.setAttribute('y2',e.high),t.setAttribute('stroke',e.open>e.close?'#28A69A':'#EE5355');break;case'rect':t.setAttribute('width',10),t.setAttribute('height',Math.abs(e.open-e.close)),t.setAttribute('x',e.x),t.setAttribute('y',e.open),t.setAttribute('fill',e.open>e.close?'#28A69A':'#EE5355')}},this.axes=[{cols:['x'],length:200,margin:10},{cols:['low','open','close','high'],length:200,margin:10}]}})}();
//# sourceMappingURL=chart-ease.min.js.map
