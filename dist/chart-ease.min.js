!function(){function t(e){const i=document.createElementNS('http://www.w3.org/2000/svg',e.tagName.toLowerCase());var s,r;return s=e,r=i,Array.from(s.attributes).forEach((t=>{t.value&&r.setAttribute(t.name,t.value)})),((t,e)=>{t.style.cssText&&(e.style.cssText=t.style.cssText)})(e,i),Array.from(e.children).forEach((e=>{i.appendChild(t(e))})),i}function e(t){return document.createElementNS('http://www.w3.org/2000/svg',t)}function i(t,e){const{height:i}=t.getBoundingClientRect();'text'==e.tagName.toLowerCase()&&(e.setAttribute('transform',`scale(1,-1) translate(0, -${i})`),e.setAttribute('y',i-parseFloat(e.getAttribute('y'))))}function s(s,r,n,h,a){const o=e('g');n.forEach(((e,n)=>{r.forEach((r=>{const l=t(r);a?a({shape:l,row:e,originalRow:h[n],index:n}):((t,e,i)=>{switch(t.nodeName){case'rect':if(e>0){const i=Number(t.getAttribute('width')),s=i>0?e-i/2:e;t.setAttribute('x',s)}if(i>0){const s=Number(t.getAttribute('height')),r=s>0?i-s/2:e;t.setAttribute('y',r)}break;case'circle':case'ellipse':e>0&&t.setAttribute('cx',e),i>0&&t.setAttribute('cy',i);default:e>0&&t.setAttribute('x',e),i>0&&t.setAttribute('y',i)}})(l,e.x,e.y),o.appendChild(l),i(s,l)}))})),s.appendChild(o)}function r(t,e){e.forEach((e=>{null==e.min&&(e.min=((t,e)=>{let i=Number.MAX_VALUE;for(let s=1;s<t.length;s++)for(let s=0;s<e.length;s++){const r=n(t,e[s]);i>r&&(i=r)}return i})(t,e.cols)),null==e.max&&(e.max=((t,e)=>{let i=Number.MIN_VALUE;for(let s=1;s<t.length;s++)for(let s=0;s<e.length;s++){const r=h(t,e[s]);r>i&&(i=r)}return i})(t,e.cols))}))}function n(t,e){let i=t[0][e];for(let s=1;s<t.length;s++)i=Math.min(i,t[s][e]);return i}function h(t,e){let i=t[0][e];for(let s=1;s<t.length;s++)i=Math.max(i,t[s][e]);return i}class a extends HTMLElement{constructor(){super()}connectedCallback(){}disconnectedCallback(){}set data(e){const i=this.getNormalizeGroups();r(e,i),this.ondataSet&&this.ondataSet();const n=((t,e)=>{const i=t.map((t=>({...t}))),s=Object.keys(t[0]);return i.forEach((t=>{e.forEach((e=>{s.forEach((i=>{e.cols.includes(i)&&(t[i]=Math.round(((t,e)=>(t-e.min)/(e.max-e.min)*(e.stop-e.start)+e.start)(t[i],e)))}))}))})),i})(e,i),h=this.parentElement.querySelector('svg');((e,i,s)=>{if(!i)return;const r=t(i);((t,e)=>{t.setAttribute('d',e.map(((t,e)=>0===e?`M ${t.x} ${t.y}`:` L ${t.x} ${t.y}`)).join(' ')),t.removeAttribute('is')})(r,s),e.appendChild(r)})(h,this.pathType,n),s(h,this.pointTypes,n,e,this.ondraw),this.parentElement.removeChild(this)}getNormalizeGroups(){const t={cols:this.getAttribute('hAxis')?this.getAttribute('hAxis').split(','):['x']};this.parentElement.axes.h&&(t.start=this.parentElement.axes.h.x1,t.stop=this.parentElement.axes.h.x2,t.min=this.parentElement.axes.h.min,t.max=this.parentElement.axes.h.max);const e={cols:this.getAttribute('vAxis')?this.getAttribute('vAxis').split(','):['y']};return this.parentElement.axes.v&&(e.start=this.parentElement.axes.v.y1,e.stop=this.parentElement.axes.v.y2,e.min=this.parentElement.axes.v.min,e.max=this.parentElement.axes.v.max),[t,e]}get pathType(){return this.querySelector('path[is="path-type"]')}get pointTypes(){return Array.from(this.children).filter((t=>!t.getAttribute('is')))}}function o(t,e,i,s,r){const n=[],h=((t,e,i)=>Math.round((e-t)/(i-1)))(t,e,i);let a=t,o=s;for(;o=(a-t)/(e-t)*(r-s)+s,o&&!(o>r);)n.push({value:a,position:o}),a+=h;return n}class l extends HTMLElement{constructor(){super(),this.setStyles(),this.height=parseFloat(this.getAttribute('height')??200),this.width=parseFloat(this.getAttribute('width')??200),this.margin={top:parseFloat(this.getAttribute('margin-top')??this.getAttribute('margin')??0),bottom:parseFloat(this.getAttribute('margin-bottom')??this.getAttribute('margin')??0),left:parseFloat(this.getAttribute('margin-left')??this.getAttribute('margin')??0),right:parseFloat(this.getAttribute('margin-right')??this.getAttribute('margin')??0)}}connectedCallback(){this.axesInit(),this.svg=((t,e)=>{const i=document.createElementNS('http://www.w3.org/2000/svg','svg');return i.setAttribute('width',t),i.setAttribute('height',e),i.setAttribute('transform','scale(1,-1)'),i})(this.width,this.height),this.appendChild(this.svg),((i,s)=>{const r=e('g');if(s.v&&s.v.type){const e=t(s.v.type);e.setAttribute('x1',s.v.x),e.setAttribute('x2',s.v.x),e.setAttribute('y1',s.v.y1),e.setAttribute('y2',s.v.y2),r.appendChild(e)}if(s.h&&s.h.type){const e=t(s.h.type);e.setAttribute('x1',s.h.x1),e.setAttribute('x2',s.h.x2),e.setAttribute('y1',s.h.y),e.setAttribute('y2',s.h.y),r.appendChild(e)}i.appendChild(r)})(this.svg,this.axes),((i,s,r)=>{const n=e('g');s.h&&s.h.ticks.length>1&&s.h.ticks.forEach((e=>{const i=t(s.h.type);i.setAttribute('x1',e.position),i.setAttribute('x2',e.position),i.setAttribute('y1',s.h.y-5),i.setAttribute('y2',s.h.y+5),n.appendChild(i)})),s.v&&s.v.ticks.length>1&&s.v.ticks.forEach((e=>{const i=t(s.v.type);i.setAttribute('x1',s.v.x-5),i.setAttribute('x2',s.v.x+5),i.setAttribute('y1',e.position),i.setAttribute('y2',e.position),n.appendChild(i)})),i.appendChild(n)})(this.svg,this.axes),((s,r,n)=>{const h=e('g');s.appendChild(h),r.v&&r.v.ticks.length>0&&r.v.ticks.forEach((e=>{const n=t(r.v.label);n.innerHTML=e.value,h.appendChild(n);const{width:a,height:o}=n.getBoundingClientRect();'right'==r.v.position?(n.setAttribute('x',r.v.x+7),n.setAttribute('y',e.position-o/3)):(n.setAttribute('x',r.v.x-a-7),n.setAttribute('y',e.position-o/3)),i(s,n)})),r.h&&r.h.ticks.length>0&&r.h.ticks.forEach((e=>{const n=t(r.h.label);n.innerHTML=e.value,h.appendChild(n);const{width:a,height:o}=n.getBoundingClientRect();'top'==r.h.position?(n.setAttribute('x',e.position-a/2),n.setAttribute('y',r.h.y+7)):(n.setAttribute('x',e.position-a/2),n.setAttribute('y',r.h.y-o)),i(s,n)}))})(this.svg,this.axes),((i,s)=>{const r=e('g');s.h&&s.h.ticks.length>1&&s.h.grid&&s.v.ticks.forEach((e=>{const i=t(s.h.grid);i.setAttribute('x1',s.h.x1),i.setAttribute('x2',s.h.x2),i.setAttribute('y1',e.position),i.setAttribute('y2',e.position),r.appendChild(i)})),s.v&&s.v.ticks.length>1&&s.v.grid&&s.h.ticks.forEach((e=>{const i=t(s.v.grid);i.setAttribute('x1',e.position),i.setAttribute('x2',e.position),i.setAttribute('y1',s.v.y1),i.setAttribute('y2',s.v.y2),r.appendChild(i)})),i.appendChild(r)})(this.svg,this.axes)}disconnectedCallback(){}set ondraw(t){this.querySelector('data-set').ondraw=t}set data(t){this.querySelector('data-set').data=t}axesInit(){this.axes={v:{y1:this.margin.bottom,y2:this.height-this.margin.top},h:{x1:this.margin.left,x2:this.width-this.margin.right}};const t=(t,e)=>parseInt(t.getAttribute(e)??0),e=this.querySelector('g[is="v-axis"]'),i=this.querySelector('g[is="h-axis"]');if(e){const i=e.getAttribute('position'),s=t(e,'min'),r=t(e,'max');this.axes.v={...this.axes.v,x:'right'==i?this.width-this.margin.right:this.margin.left,min:s,max:r,position:i,type:e.querySelector('line'),label:e.querySelector('text'),grid:e.querySelector('line[is="grid"]'),ticks:o(s,r,t(e,'ticks'),this.axes.v.y1,this.axes.v.y2)}}if(i){const s=i.getAttribute('position'),r=t(i,'min'),n=t(i,'max');this.axes.h={...this.axes.h,y:'top'==s?this.height-this.margin.top:this.margin.bottom,min:r,max:n,position:s,type:i.querySelector('line'),label:i.querySelector('text'),grid:e.querySelector('line[is="grid"]'),ticks:o(r,n,t(i,'ticks'),this.axes.h.x1,this.axes.h.x2)}}}setStyles(){this.style.lineHeight=0}}customElements.get('data-set')??customElements.define('data-set',a),customElements.get('chart-ease')??customElements.define('chart-ease',l),customElements.get('candle-stick')??customElements.define('candle-stick',class extends a{constructor(){super(),this.adjust()}connectedCallback(){}disconnectedCallback(){}adjust(){this.appendChild(e('line')),this.appendChild(e('rect')),this.ondraw=({shape:t,row:e})=>{switch(t.tagName){case'line':t.setAttribute('x1',e.x+5),t.setAttribute('x2',e.x+5),t.setAttribute('y1',e.low),t.setAttribute('y2',e.high),t.setAttribute('stroke',e.open>e.close?'#28A69A':'#EE5355');break;case'rect':t.setAttribute('width',10),t.setAttribute('height',Math.abs(e.open-e.close)),t.setAttribute('x',e.x),t.setAttribute('y',e.open),t.setAttribute('fill',e.open>e.close?'#28A69A':'#EE5355')}},this.axes=[{cols:['x'],length:200,margin:10},{cols:['low','open','close','high'],length:200,margin:10}]}})}();
//# sourceMappingURL=chart-ease.min.js.map
