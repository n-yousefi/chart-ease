{"version":3,"file":"chart-ease.min.js","sources":["../site/js/chart-ease.js"],"sourcesContent":["(function () {\n  'use strict';\n\n  function normalize(arr, normalizeGroups) {\r\n    const normalizedArr = arr.map((item) => {\r\n      return { ...item };\r\n    });\r\n\r\n    const arrKeys = Object.keys(arr[0]);\r\n    normalizedArr.forEach((item) => {\r\n      normalizeGroups.forEach((group) => {\r\n        arrKeys.forEach((key) => {\r\n          if (group.cols.includes(key)) {\r\n            item[key] = Math.round(normalizeNumber(item[key], group));\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n    return normalizedArr;\r\n  }\r\n\r\n  function normalizeNumber(num, group) {\r\n    return ((num - group.min) / (group.max - group.min)) * (group.stop - group.start) + group.start;\r\n  }\n\n  function copyAttrs(from, to) {\r\n    Array.from(from.attributes).forEach((attr) => {\r\n      if (attr.value) to.setAttribute(attr.name, attr.value);\r\n    });\r\n  }\n\n  function copyStyles(from, to) {\r\n    if (from.style.cssText) to.style.cssText = from.style.cssText;\r\n  }\n\n  function cloneSVGElement(element) {\r\n    const newElement = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      element.tagName.toLowerCase()\r\n    );\r\n    copyAttrs(element, newElement);\r\n    copyStyles(element, newElement);\r\n    const children = Array.from(element.children);\r\n    children.forEach((child) => {\r\n      newElement.appendChild(cloneSVGElement(child));\r\n    });\r\n    return newElement;\r\n  }\n\n  function createSVGElements(tagName) {\r\n    return document.createElementNS(\"http://www.w3.org/2000/svg\", tagName);\r\n  }\n\n  function flip(svg, shape) {\r\n    const { height } = svg.getBoundingClientRect();\r\n    if (shape.tagName.toLowerCase() == \"text\") {\r\n      shape.setAttribute(\"transform\", `scale(1,-1) translate(0, -${height})`);\r\n      shape.setAttribute(\"y\", height - parseFloat(shape.getAttribute(\"y\")));\r\n    }\r\n  }\n\n  function drawPoints(svg, pointTypes, data, originalData, ondraw) {\r\n    const g = createSVGElements(\"g\");\r\n    data.forEach((row, index) => {\r\n      pointTypes.forEach((pointType) => {\r\n        const shape = cloneSVGElement(pointType);\r\n        if (!ondraw) setDefaultPosition(shape, row.x, row.y);\r\n        else\r\n          ondraw({\r\n            shape,\r\n            row,\r\n            originalRow: originalData[index],\r\n            index,\r\n          });\r\n        g.appendChild(shape);\r\n        flip(svg, shape);\r\n      });\r\n    });\r\n    svg.appendChild(g);\r\n  }\r\n\r\n  function setDefaultPosition(shape, x, y) {\r\n    switch (shape.nodeName) {\r\n      case \"rect\":\r\n        if (x > 0) {\r\n          const width = Number(shape.getAttribute(\"width\"));\r\n          const adjustWidth = width > 0 ? x - width / 2 : x;\r\n          shape.setAttribute(\"x\", adjustWidth);\r\n        }\r\n        if (y > 0) {\r\n          const height = Number(shape.getAttribute(\"height\"));\r\n          const adjustHeight = height > 0 ? y - height / 2 : x;\r\n          shape.setAttribute(\"y\", adjustHeight);\r\n        }\r\n        break;\r\n      case \"circle\":\r\n      case \"ellipse\":\r\n        if (x > 0) shape.setAttribute(\"cx\", x);\r\n        if (y > 0) shape.setAttribute(\"cy\", y);\r\n      default:\r\n        if (x > 0) shape.setAttribute(\"x\", x);\r\n        if (y > 0) shape.setAttribute(\"y\", y);\r\n        break;\r\n    }\r\n  }\n\n  function drawPath(parent, pathType, data) {\r\n    if (!pathType) return;\r\n    const path = cloneSVGElement(pathType);\r\n    loadPathData(path, data);\r\n    parent.appendChild(path);\r\n  }\r\n\r\n  function loadPathData(path, data) {\r\n    path.setAttribute(\r\n      \"d\",\r\n      data\r\n        .map((point, index) => (index === 0 ? `M ${point.x} ${point.y}` : ` L ${point.x} ${point.y}`))\r\n        .join(\" \")\r\n    );\r\n    path.removeAttribute(\"is\");\r\n  }\n\n  function setGroupsMinMax(data, groups) {\r\n    groups.forEach((group) => {\r\n      if (group.min == undefined) group.min = getKeysMin(data, group.cols);\r\n      if (group.max == undefined) group.max = getKeysMax(data, group.cols);\r\n    });\r\n  }\r\n\r\n  function getKeysMin(data, keys) {\r\n    let min = Number.MAX_VALUE;\r\n    for (let i = 1; i < data.length; i++) {\r\n      for (let j = 0; j < keys.length; j++) {\r\n        const keyMin = getKeyMin(data, keys[j]);\r\n        if (min > keyMin) min = keyMin;\r\n      }\r\n    }\r\n    return min;\r\n  }\r\n\r\n  function getKeysMax(data, keys) {\r\n    let max = Number.MIN_VALUE;\r\n    for (let i = 1; i < data.length; i++) {\r\n      for (let j = 0; j < keys.length; j++) {\r\n        const keyMax = getKeyMax(data, keys[j]);\r\n        if (keyMax > max) max = keyMax;\r\n      }\r\n    }\r\n    return max;\r\n  }\r\n\r\n  function getKeyMin(data, key) {\r\n    let min = data[0][key];\r\n    for (let i = 1; i < data.length; i++) {\r\n      min = Math.min(min, data[i][key]);\r\n    }\r\n    return min;\r\n  }\r\n\r\n  function getKeyMax(data, key) {\r\n    let max = data[0][key];\r\n    for (let i = 1; i < data.length; i++) {\r\n      max = Math.max(max, data[i][key]);\r\n    }\r\n    return max;\r\n  }\n\n  class DataSet extends HTMLElement {\r\n    constructor() {\r\n      super();\r\n    }\r\n\r\n    connectedCallback() {}\r\n    disconnectedCallback() {}\r\n\r\n    set data(originalData) {\r\n      const normalizeGroups = this.getNormalizeGroups();\r\n      setGroupsMinMax(originalData, normalizeGroups);\r\n      if (this[\"ondataSet\"]) this[\"ondataSet\"]();\r\n      const data = normalize(originalData, normalizeGroups);\r\n      const svg = this.parentElement.querySelector(\"svg\");\r\n      drawPath(svg, this.pathType, data);\r\n      drawPoints(svg, this.pointTypes, data, originalData, this[\"ondraw\"]);\r\n      this.parentElement.removeChild(this);\r\n    }\r\n\r\n    getNormalizeGroups() {\r\n      const h = {\r\n        cols: this.getAttribute(\"hAxis\") ? this.getAttribute(\"hAxis\").split(\",\") : [\"x\"],\r\n      };\r\n      if (this.parentElement.axes.h) {\r\n        h.start = this.parentElement.axes.h.x1;\r\n        h.stop = this.parentElement.axes.h.x2;\r\n        h.min = this.parentElement.axes.h.min;\r\n        h.max = this.parentElement.axes.h.max;\r\n      }\r\n      const v = {\r\n        cols: this.getAttribute(\"vAxis\") ? this.getAttribute(\"vAxis\").split(\",\") : [\"y\"],\r\n      };\r\n      if (this.parentElement.axes.v) {\r\n        v.start = this.parentElement.axes.v.y1;\r\n        v.stop = this.parentElement.axes.v.y2;\r\n        v.min = this.parentElement.axes.v.min;\r\n        v.max = this.parentElement.axes.v.max;\r\n      }\r\n      return [h, v];\r\n    }\r\n\r\n    get pathType() {\r\n      return this.querySelector(`path[is=\"path-type\"]`);\r\n    }\r\n\r\n    get pointTypes() {\r\n      return Array.from(this.children).filter((item) => !item.getAttribute(\"is\"));\r\n    }\r\n  }\n\n  class CandleStick extends DataSet {\r\n    constructor() {\r\n      super();\r\n      this.adjust();\r\n    }\r\n\r\n    connectedCallback() {}\r\n    disconnectedCallback() {}\r\n\r\n    adjust() {\r\n      this.appendChild(createSVGElements(\"line\"));\r\n      this.appendChild(createSVGElements(\"rect\"));\r\n      this.ondraw = ({ shape, row }) => {\r\n        switch (shape.tagName) {\r\n          case \"line\":\r\n            shape.setAttribute(\"x1\", row.x + 5);\r\n            shape.setAttribute(\"x2\", row.x + 5);\r\n            shape.setAttribute(\"y1\", row.low);\r\n            shape.setAttribute(\"y2\", row.high);\r\n            shape.setAttribute(\r\n              \"stroke\",\r\n              row.open > row.close ? \"#28A69A\" : \"#EE5355\"\r\n            );\r\n            break;\r\n          case \"rect\":\r\n            shape.setAttribute(\"width\", 10);\r\n            shape.setAttribute(\"height\", Math.abs(row.open - row.close));\r\n            shape.setAttribute(\"x\", row.x);\r\n            shape.setAttribute(\"y\", row.open);\r\n            shape.setAttribute(\r\n              \"fill\",\r\n              row.open > row.close ? \"#28A69A\" : \"#EE5355\"\r\n            );\r\n            break;\r\n        }\r\n      };\r\n      this.axes = [\r\n        { cols: [\"x\"], length: 200, margin: 10 },\r\n        {\r\n          cols: [\"low\", \"open\", \"close\", \"high\"],\r\n          length: 200,\r\n          margin: 10,\r\n        },\r\n      ];\r\n    }\r\n  }\n\n  const WIDTH = 200;\r\n  const HEIGHT = 200;\r\n  const MARGIN = 0;\n\n  function createSVG(width, height) {\r\n    const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n    svg.setAttribute(\"width\", width);\r\n    svg.setAttribute(\"height\", height);\r\n    svg.setAttribute(\"transform\", \"scale(1,-1)\");\r\n    return svg;\r\n  }\n\n  function drawAxes(svg, axes) {\r\n    const g = createSVGElements(\"g\");\r\n    if (axes.v && axes.v.type) {\r\n      const axis = cloneSVGElement(axes.v.type);\r\n      axis.setAttribute(\"x1\", axes.v.x);\r\n      axis.setAttribute(\"x2\", axes.v.x);\r\n      axis.setAttribute(\"y1\", axes.v.y1);\r\n      axis.setAttribute(\"y2\", axes.v.y2);\r\n      g.appendChild(axis);\r\n    }\r\n\r\n    if (axes.h && axes.h.type) {\r\n      const axis = cloneSVGElement(axes.h.type);\r\n      axis.setAttribute(\"x1\", axes.h.x1);\r\n      axis.setAttribute(\"x2\", axes.h.x2);\r\n      axis.setAttribute(\"y1\", axes.h.y);\r\n      axis.setAttribute(\"y2\", axes.h.y);\r\n      g.appendChild(axis);\r\n    }\r\n    svg.appendChild(g);\r\n  }\n\n  function drawTicks(svg, axes, plot) {\r\n    const g = createSVGElements(\"g\");\r\n    if (axes.h && axes.h.ticks.length > 1) {\r\n      axes.h.ticks.forEach((tick) => {\r\n        const tl = cloneSVGElement(axes.h.type);\r\n        tl.setAttribute(\"x1\", tick.position);\r\n        tl.setAttribute(\"x2\", tick.position);\r\n        tl.setAttribute(\"y1\", axes.h.y - 5);\r\n        tl.setAttribute(\"y2\", axes.h.y + 5);\r\n        g.appendChild(tl);\r\n      });\r\n    }\r\n    if (axes.v && axes.v.ticks.length > 1) {\r\n      axes.v.ticks.forEach((tick) => {\r\n        const tl = cloneSVGElement(axes.v.type);\r\n        tl.setAttribute(\"x1\", axes.v.x - 5);\r\n        tl.setAttribute(\"x2\", axes.v.x + 5);\r\n        tl.setAttribute(\"y1\", tick.position);\r\n        tl.setAttribute(\"y2\", tick.position);\r\n        g.appendChild(tl);\r\n      });\r\n    }\r\n    svg.appendChild(g);\r\n  }\n\n  function drawGridLines(svg, axes) {\r\n    const g = createSVGElements(\"g\");\r\n    if (axes.h && axes.h.ticks.length > 1 && axes.h.grid) {\r\n      axes.v.ticks.forEach((tick) => {\r\n        const tl = cloneSVGElement(axes.h.grid);\r\n        tl.setAttribute(\"x1\", axes.h.x1);\r\n        tl.setAttribute(\"x2\", axes.h.x2);\r\n        tl.setAttribute(\"y1\", tick.position);\r\n        tl.setAttribute(\"y2\", tick.position);\r\n        g.appendChild(tl);\r\n      });\r\n    }\r\n    if (axes.v && axes.v.ticks.length > 1 && axes.v.grid) {\r\n      axes.h.ticks.forEach((tick) => {\r\n        const tl = cloneSVGElement(axes.v.grid);\r\n        tl.setAttribute(\"x1\", tick.position);\r\n        tl.setAttribute(\"x2\", tick.position);\r\n        tl.setAttribute(\"y1\", axes.v.y1);\r\n        tl.setAttribute(\"y2\", axes.v.y2);\r\n        g.appendChild(tl);\r\n      });\r\n    }\r\n    svg.appendChild(g);\r\n  }\n\n  function drawLabels(svg, axes, axesLines) {\r\n    const g = createSVGElements(\"g\");\r\n    svg.appendChild(g);\r\n    if (axes.v && axes.v.ticks.length > 0) {\r\n      axes.v.ticks.forEach((tick) => {\r\n        const text = cloneSVGElement(axes.v.label);\r\n        text.innerHTML = tick.value;\r\n        g.appendChild(text);\r\n        const { width, height } = text.getBoundingClientRect();\r\n        if (axes.v.position == \"right\") {\r\n          text.setAttribute(\"x\", axes.v.x + 7);\r\n          text.setAttribute(\"y\", tick.position - height / 3);\r\n        } else {\r\n          text.setAttribute(\"x\", axes.v.x - width - 7);\r\n          text.setAttribute(\"y\", tick.position - height / 3);\r\n        }\r\n        flip(svg, text);\r\n      });\r\n    }\r\n    if (axes.h && axes.h.ticks.length > 0) {\r\n      axes.h.ticks.forEach((tick) => {\r\n        const text = cloneSVGElement(axes.h.label);\r\n        text.innerHTML = tick.value;\r\n        g.appendChild(text);\r\n        const { width, height } = text.getBoundingClientRect();\r\n        if (axes.h.position == \"top\") {\r\n          text.setAttribute(\"x\", tick.position - width / 2);\r\n          text.setAttribute(\"y\", axes.h.y + 7);\r\n        } else {\r\n          text.setAttribute(\"x\", tick.position - width / 2);\r\n          text.setAttribute(\"y\", axes.h.y - height);\r\n        }\r\n        flip(svg, text);\r\n      });\r\n    }\r\n  }\n\n  function getAxisTicks(min, max, count, start, stop) {\r\n    const axisTicks = [];\r\n    const tickSize = getTickSize(min, max, count);\r\n    let value = min;\r\n    let position = start;\r\n    while (true) {\r\n      position = ((value - min) / (max - min)) * (stop - start) + start;\r\n      if (!position || position > stop) break;\r\n      axisTicks.push({ value, position });\r\n      value += tickSize;\r\n    }\r\n    return axisTicks;\r\n  }\r\n\r\n  function getTickSize(min, max, count) {\r\n    return Math.round((max - min) / (count - 1));\r\n  }\n\n  class ChartEase extends HTMLElement {\r\n    constructor() {\r\n      super();\r\n      this.setStyles();\r\n      this.height = parseFloat(this.getAttribute(\"height\") ?? HEIGHT);\r\n      this.width = parseFloat(this.getAttribute(\"width\") ?? WIDTH);\r\n      this.margin = {\r\n        top: parseFloat(this.getAttribute(\"margin-top\") ?? this.getAttribute(\"margin\") ?? MARGIN),\r\n        bottom: parseFloat(this.getAttribute(\"margin-bottom\") ?? this.getAttribute(\"margin\") ?? MARGIN),\r\n        left: parseFloat(this.getAttribute(\"margin-left\") ?? this.getAttribute(\"margin\") ?? MARGIN),\r\n        right: parseFloat(this.getAttribute(\"margin-right\") ?? this.getAttribute(\"margin\") ?? MARGIN),\r\n      };\r\n    }\r\n\r\n    connectedCallback() {\r\n      this.axesInit();\r\n      this.svg = createSVG(this.width, this.height);\r\n      this.appendChild(this.svg);\r\n      drawAxes(this.svg, this.axes);\r\n      drawTicks(this.svg, this.axes);\r\n      drawLabels(this.svg, this.axes);\r\n      drawGridLines(this.svg, this.axes);\r\n    }\r\n    disconnectedCallback() {}\r\n\r\n    set ondraw(ondraw) {\r\n      this.querySelector(\"data-set\").ondraw = ondraw;\r\n    }\r\n    set data(data) {\r\n      this.querySelector(\"data-set\").data = data;\r\n    }\r\n\r\n    axesInit() {\r\n      this.axes = {\r\n        v: {\r\n          y1: this.margin.bottom,\r\n          y2: this.height - this.margin.top,\r\n        },\r\n        h: {\r\n          x1: this.margin.left,\r\n          x2: this.width - this.margin.right,\r\n        },\r\n      };\r\n\r\n      const getIntAttr = (elem, attr) => parseInt(elem.getAttribute(attr) ?? 0);\r\n      const vAxis = this.querySelector(`g[is=\"v-axis\"]`);\r\n      const hAxis = this.querySelector(`g[is=\"h-axis\"]`);\r\n\r\n      if (vAxis) {\r\n        const position = vAxis.getAttribute(\"position\");\r\n        const min = getIntAttr(vAxis, \"min\");\r\n        const max = getIntAttr(vAxis, \"max\");\r\n        this.axes.v = {\r\n          ...this.axes.v,\r\n          x: position == \"right\" ? this.width - this.margin.right : this.margin.left,\r\n          min,\r\n          max,\r\n          position,\r\n          type: vAxis.querySelector(\"line\"),\r\n          label: vAxis.querySelector(\"text\"),\r\n          grid: vAxis.querySelector(`line[is=\"grid\"]`),\r\n          ticks: getAxisTicks(min, max, getIntAttr(vAxis, \"ticks\"), this.axes.v.y1, this.axes.v.y2),\r\n        };\r\n      }\r\n      if (hAxis) {\r\n        const position = hAxis.getAttribute(\"position\");\r\n        const min = getIntAttr(hAxis, \"min\");\r\n        const max = getIntAttr(hAxis, \"max\");\r\n        this.axes.h = {\r\n          ...this.axes.h,\r\n          y: position == \"top\" ? this.height - this.margin.top : this.margin.bottom,\r\n          min,\r\n          max,\r\n          position,\r\n          type: hAxis.querySelector(\"line\"),\r\n          label: hAxis.querySelector(\"text\"),\r\n          grid: vAxis.querySelector(`line[is=\"grid\"]`),\r\n          ticks: getAxisTicks(min, max, getIntAttr(hAxis, \"ticks\"), this.axes.h.x1, this.axes.h.x2),\r\n        };\r\n      }\r\n    }\r\n\r\n    setStyles() {\r\n      this.style.lineHeight = 0;\r\n    }\r\n  }\r\n\r\n  customElements.get(\"data-set\") ?? customElements.define(\"data-set\", DataSet);\r\n  customElements.get(\"chart-ease\") ?? customElements.define(\"chart-ease\", ChartEase);\r\n  customElements.get(\"candle-stick\") ?? customElements.define(\"candle-stick\", CandleStick);\n\n  return ChartEase;\n\n})();\n//# sourceMappingURL=chart-ease.js.map\n"],"names":["cloneSVGElement","element","newElement","document","createElementNS","tagName","toLowerCase","from","to","Array","attributes","forEach","attr","value","setAttribute","name","style","cssText","copyStyles","children","child","appendChild","createSVGElements","flip","svg","shape","height","getBoundingClientRect","parseFloat","getAttribute","drawPoints","pointTypes","data","originalData","ondraw","g","row","index","pointType","originalRow","x","y","nodeName","width","Number","adjustWidth","adjustHeight","setDefaultPosition","setGroupsMinMax","groups","group","undefined","min","keys","MAX_VALUE","i","length","j","keyMin","getKeyMin","getKeysMin","cols","max","MIN_VALUE","keyMax","getKeyMax","getKeysMax","key","Math","DataSet","HTMLElement","constructor","super","connectedCallback","disconnectedCallback","normalizeGroups","this","getNormalizeGroups","arr","normalizedArr","map","item","arrKeys","Object","includes","round","num","stop","start","normalizeNumber","normalize","parentElement","querySelector","parent","pathType","path","point","join","removeAttribute","loadPathData","drawPath","removeChild","h","split","axes","x1","x2","v","y1","y2","filter","getAxisTicks","count","axisTicks","tickSize","getTickSize","position","push","ChartEase","setStyles","margin","top","bottom","left","right","axesInit","createSVG","type","axis","drawAxes","plot","ticks","tick","tl","drawTicks","axesLines","text","label","innerHTML","drawLabels","grid","drawGridLines","getIntAttr","elem","parseInt","vAxis","hAxis","lineHeight","customElements","get","define","adjust","low","high","open","close","abs"],"mappings":"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"}